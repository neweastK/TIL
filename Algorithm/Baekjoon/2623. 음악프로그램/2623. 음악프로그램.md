## 🐌 알고리즘 문제 풀이

### Baekjoon_2623. 음악프로그램

#### 📒문제

> 인터넷 방송 KOI(Korea Open Internet)의 음악 프로그램 PD인 남일이는 자기가 맡은 프로그램 '뮤직 KOI'에서 가수의 출연 순서를 정하는 일을 매우 골치 아파한다. 순서를 정하기 위해서는 많은 조건을 따져야 한다.
>
> 그래서 오늘 출연 예정인 여섯 팀의 가수에 대해서 남일이가 보조 PD 세 명에게 각자 담당한 가수의 출연 순서를 정해오게 하였다. 보조 PD들이 가져온 것은 아래와 같다.
>
> - 1 4 3
> - 6 2 5 4
> - 2 3
>
> 첫 번째 보조 PD는 1번 가수가 먼저, 다음에 4번 가수, 다음에 3번 가수가 출연하기로 순서를 정했다. 두 번째 보조 PD는 6번, 2번, 5번, 4번 순으로 자기 담당 가수들의 순서를 정했다. 한 가수를 여러 보조 PD가 담당할 수도 있다. 마지막으로, 세 번째 보조 PD는 2번 먼저, 다음에 3번으로 정했다.
>
> 남일이가 할 일은 이 순서들을 모아서 전체 가수의 순서를 정하는 것이다. 남일이는 잠시 생각을 하더니 6 2 1 5 4 3으로 순서를 정했다. 이렇게 가수 순서를 정하면 세 보조 PD가 정해온 순서를 모두 만족한다. 물론, 1 6 2 5 4 3으로 전체 순서를 정해도 괜찮다.
>
> 경우에 따라서 남일이가 모두를 만족하는 순서를 정하는 것이 불가능할 수도 있다. 예를 들어, 세 번째 보조 PD가 순서를 2 3 대신에 3 2로 정해오면 남일이가 전체 순서를 정하는 것이 불가능하다. 이번에 남일이는 우리 나라의 월드컵 4강 진출 기념 음악제의 PD를 맡게 되었는데, 출연 가수가 아주 많다. 이제 여러분이 해야 할 일은 보조 PD들이 가져 온 순서들을 보고 남일이가 가수 출연 순서를 정할 수 있도록 도와 주는 일이다.
>
> 보조 PD들이 만든 순서들이 입력으로 주어질 때, 전체 가수의 순서를 정하는 프로그램을 작성하시오.
>
> [<문제 출처>](https://www.acmicpc.net/problem/2623)



#### :pushpin: 입력 및 출력

- 첫째 줄에는 가수의 수 N과 보조 PD의 수 M이 주어진다. 가수는 번호 1, 2,…,N 으로 표시한다. 둘째 줄부터 각 보조 PD가 정한 순서들이 한 줄에 하나씩 나온다. 각 줄의 맨 앞에는 보조 PD가 담당한 가수의 수가 나오고, 그 뒤로는 그 가수들의 순서가 나온다. N은 1이상 1,000이하의 정수이고, M은 1이상 100이하의 정수이다.

- 출력은 N 개의 줄로 이뤄지며, 한 줄에 하나의 번호를 출력한 다. 이들은 남일이가 정한 가수들의 출연 순서를 나타낸다. 답이 여럿일 경우에는 아무거나 하나를 출력 한다. 만약 남일이가 순서를 정하는 것이 불가능할 경우에는 첫째 줄에 0을 출력한다.


---

> 예시

```
input :
6 3
3 1 4 3
4 6 2 5 4
2 2 3

output :
6
2
1
5
4
3
```

----




#### 🚀point

1. 위상정렬 문제



#### 🔎풀이

1.  각 가수의 진입차수와 연결순서를 나타낼 배열 두개를 생성한다(in_degree,graph)
1.  보조 PD가 계획한 순서들을 순회한다
    1.  먼저해야하는 가수 - 다음 가수 를 graph 배열에 연결관계로 나타낸다
    1.  그리고, 다음 가수는 진입차수를 1 늘려준다
    1.  단, 이미 체크했던 조합이라면 (가수-다음가수 가 똑같다면) 중복되지 않게 넘어간다

1.  queue를 생성하고 진입차수가 0인 가수들을 queue에 삽입한다
1.  queue가 빌 때까지, 아래 작업을 반복한다
    1.  queue의 가장 앞 값을 pop한다
    1.  해당 값이 순서이므로 정답 배열에 우선 넣어준다
    1.  만약 해당 가수 다음에 해야하는 가수가 있다면 각 가수별 진입차수를 1 빼준다
    1.  진입차수가 0이 되면, queue에 넣어준다

1.  정답배열의 길이가 가수의 수와 같다면 한줄씩 출력한다
    1.  아니라면 0 출력




#### 💻코드

```python
from collections import deque
import sys
input = sys.stdin.readline

N,M = map(int,input().split())
# 진입차수 나타낼 배열
in_degree = [0]*(N+1)
# graph[i][j]는 반드시 i가수 다음에 해야하는 가수들 j를 의미
graph = [[0]*(N+1) for _ in range(N+1)]

for _ in range(M):
    m,*arr = list(map(int,input().split()))
    for i in range(1,m):
        # 중복되지 않게 이미 방문했다면 적용 x
        if graph[arr[i-1]][arr[i]] == 0:
            # arr[i] 가수는 반드시 arr[i-1] 가수 뒤에 해야한다는 뜻
            graph[arr[i - 1]][arr[i]] = 1
            # arr[i] 가수의 진입차수 늘려주기
            # 진입차수 == 해당 가수 이전에 반드시 불러야하는 가수들의 수
            in_degree[arr[i]]+=1

queue = deque([])
# queue 초기값 설정
# 앞에 불러야하는 가수가 없는 경우 (즉, 먼저해도 되는 가수들)
for j in range(1,N+1):
    if in_degree[j] == 0:
        queue.append(j)
ans = []

while queue:
    # 이제 무대에 설 수 있는 가수
    now = queue.popleft()
    # 정답 배열에 넣어주기
    ans.append(now)
    # 반드시 해당 가수 뒤에 해야하는 가수들 체크
    for k in range(1,N+1):
        if graph[now][k] != 0:
            # 진입차수 빼주기
            in_degree[k] -= 1
            # 이제 자신이 부를 수 있으면 해당 가수 queue에 넣어주기
            if in_degree[k] == 0:
                queue.append(k)

if len(ans) == N:
    for a in range(N):
        print(ans[a])
else:
    print(0)


```



#### ❌ 발생 오류 및 해결

- 보조 PD가 각각 같은 계획을 짜온 경우 중복되지 않게 처리해줘야함
  - EX) 보조PD1 : 1번가수 - 2번가수, 보조PD2 : 1번가수 - 2번가수인 경우
    - 2번 가수는 진입차수가 2가 되어버려서 오답처리됨
